!function(){var a=a||{};a.Ameblo=a.Ameblo||{},a.Ameblo.Image=a.Ameblo.Image||{},a.Ameblo.Image.Base=function(){},a.Ameblo.Image.Base.prototype.isSuccess=!0,a.Ameblo.Image.Base.prototype.isTimer=!1,a.Ameblo.Image.Base.prototype.clickFlg=!0,a.Ameblo.Image.Base.prototype.requestCount=1,a.Ameblo.Image.Base.prototype.apiUrl="",a.Ameblo.Image.Base.prototype.cancelBubbling=function(a){a.stopPropagation?a.stopPropagation():window.event&&(window.event.cancelBubble=!0)},a.Ameblo.Image.Base.prototype.callback=function(a){var b=this;this.clickFlg=!0,1==this.isTimer&&(window.clearTimeout(this.getApiTimer),this.isTimer=!1),0==a.hasErrors&&1==a.success?(this.isSuccess=!0,this.requestCount=1,this.successCallback(a)):1==a.hasErrors&&0==a.success&&b.requestCount<3?(this.requestCount+=1,this.requestTimer=window.setTimeout(function(){var a=new Date/1;b.createScript.call(b,b.apiUrl+"&"+String(a))},3e3)):(this.failGetJson(),this.requestCount=1)},a.Ameblo.Image.Base.prototype.createScript=function(a){this.isSuccess=!1,1==this.isTimer&&(window.clearTimeout(this.getApiTimer),this.isTimer=!1);var b=this;this.clickFlg=!1,this.apiUrl=a;var c=document.createElement("script");c.type="text/javascript",c.src=a,document.body.appendChild(c),0==this.isTimer&&(this.isTimer=!0,this.getApiTimer=window.setTimeout(function(){b.failGetJson.call(b)},1e4))},a.Ameblo.Image.Base.prototype.successCallback=function(a){},a.Ameblo.Image.Base.prototype.failGetJson=function(){},a.Ameblo.Image.DetailCommon=function(){this.initializeCommon.call(this)},a.Ameblo.Image.DetailCommon.prototype=new a.Ameblo.Image.Base,a.Ameblo.Image.DetailCommon.prototype.contentElm=document.getElementById("content"),a.Ameblo.Image.DetailCommon.prototype.frameInnerElm=document.getElementById("frameInner"),a.Ameblo.Image.DetailCommon.prototype.mainElm=document.getElementById("main"),a.Ameblo.Image.DetailCommon.prototype.imgItemElm=document.getElementById("imgItem"),a.Ameblo.Image.DetailCommon.prototype.entryLinkElm=document.getElementById("entryLink"),a.Ameblo.Image.DetailCommon.prototype.initializeCommon=function(){var a=this;window.addEventListener?(window.addEventListener("load",function(){a.setContentHeight.call(a)},!1),window.addEventListener("resize",function(){a.setContentHeight.call(a)},!1)):(window.attachEvent("onload",function(){a.setContentHeight.call(a)}),window.attachEvent("onresize",function(){a.setContentHeight.call(a)}))},a.Ameblo.Image.DetailCommon.prototype.getTitleBoxHeight=function(){return document.getElementById("titleBox")?document.getElementById("titleBox").clientHeight:0},a.Ameblo.Image.DetailCommon.prototype.setContentHeight=function(){var a=document.getElementById("side").clientHeight,b=document.getElementById("ambHeader").clientHeight,c=this.getWindowSize().height-b;this.setImgAreaSize(c),c=Math.max(c,a),this.contentElm.style.height=String(c)+"px"},a.Ameblo.Image.DetailCommon.prototype.setImgAreaSize=function(a){var b,c,d=document.getElementById("imgArea");this.imgItemElm&&(b=this.getSize_Height_Width(a).height,c=this.getSize_Height_Width(a).width,d.style.height=String(b)+"px",d.style.width=String(c)+"px",this.imgItemElm.removeAttribute("style"),this.imgItemElm.style.maxHeight=String(b)+"px",this.imgItemElm.style.maxWidth=String(c)+"px"),this.setFrameInnerWidth()},a.Ameblo.Image.DetailCommon.prototype.getSize_Height_Width=function(a){var b,c,d=400,e=320,f=40,g=document.getElementById("blogTitle").clientHeight,h=document.documentElement.clientWidth;return b=a-f-this.getTitleBoxHeight()-g,b=Math.max(b,d),c=Math.floor(4*b/3),b>d&&c+e>h&&(c=h-e,c=Math.max(c,4*d/3),b=Math.floor(3*c/4)),{height:b,width:c}},a.Ameblo.Image.DetailCommon.prototype.getSize_Width_Height=function(){var a,b,c=320,d=1600/3;return b=screen.availWidth-c,b=Math.max(b,d),a=Math.floor(3*b/4),{height:a,width:b}},a.Ameblo.Image.DetailCommon.prototype.setFrameInnerWidth=function(){var a=20,b=document.getElementById("side"),c=Math.ceil(this.mainElm.clientWidth)+b.clientWidth+a+5;this.frameInnerElm.style.width=String(c)+"px",this.setMainMargin()},a.Ameblo.Image.DetailCommon.prototype.setMainMargin=function(){var a=Math.floor((this.frameInnerElm.clientHeight-this.mainElm.clientHeight)/2);a<0&&(a=0),this.contentElm.style.visibility="visible"},a.Ameblo.Image.DetailCommon.prototype.getWindowSize=function(){return{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth}},a.Ameblo.Image.DetailCommon.prototype.setEntryTitle=function(a,b,c){a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/"/g,"&quot;"),a=a.replace(/\"/g,"&quot;"),a=a.replace(/\'/g,"&#39;"),a=a.replace(/\\/g,"&#92;"),a=a.replace(/=/g,"&#61;");var d=document.getElementById("entryLink"),e=document.getElementById("entryDate");d.innerHTML="「"+a+"」の記事へ",d.href=b,e.innerHTML=c},a.Ameblo.Image.ImageDetail=function(a){this.getData=function(){return a},this.init()},a.Ameblo.Image.ImageDetail.prototype=new a.Ameblo.Image.DetailCommon,a.Ameblo.Image.ImageDetail.prototype.isClick=!0,a.Ameblo.Image.ImageDetail.prototype.isOnMouse=!1,a.Ameblo.Image.ImageDetail.prototype.isFirstLoad=!0,a.Ameblo.Image.ImageDetail.prototype.isMeasureLog=!1,a.Ameblo.Image.ImageDetail.prototype.isNextAPI=!0,a.Ameblo.Image.ImageDetail.prototype.ADCHANGENUM=2,a.Ameblo.Image.ImageDetail.prototype.adChangeCount=0,a.Ameblo.Image.ImageDetail.prototype.THEIRADCHANGENUM=3,a.Ameblo.Image.ImageDetail.prototype.theirAdChangeCount=0,a.Ameblo.Image.ImageDetail.prototype.minDataCount=0,a.Ameblo.Image.ImageDetail.prototype.maxDataCount=0,a.Ameblo.Image.ImageDetail.prototype.thumImgCount=0,a.Ameblo.Image.ImageDetail.prototype.currentDataNum=0,a.Ameblo.Image.ImageDetail.prototype.nextURL="",a.Ameblo.Image.ImageDetail.prototype.prevURL="",a.Ameblo.Image.ImageDetail.prototype.callbackType="",a.Ameblo.Image.ImageDetail.prototype.naviBoxElm=document.getElementById("naviBox"),a.Ameblo.Image.ImageDetail.prototype.preNaviElm=document.getElementById("preNavi"),a.Ameblo.Image.ImageDetail.prototype.nextNaviElm=document.getElementById("nextNavi"),a.Ameblo.Image.ImageDetail.prototype.reloadLinkElm=document.getElementById("reloadLink"),a.Ameblo.Image.ImageDetail.prototype.init=function(){var a=this;this.pageDomain=this.getData().pageDomain,this.measure=this.getData().measure,this.currentImgData=this.getData().imgData.current,this.nextImgData=this.getData().imgData.next,this.prevImgData=this.getData().imgData.prev,this.imageDomain=this.getData().imgDomain,this.currentImgData.imgList[0]&&(this.getThumElms(),this.imgData={},this.imgData[0]=this.currentImgData.imgList[0],this.setNextData(this.nextImgData)),window.addEventListener?(document.body.addEventListener("mouseover",function(b){a.getMouseOverTarget.call(a,b)},!1),document.body.addEventListener("click",function(b){a.getClickTarget.call(a,b)},!1)):(document.body.attachEvent("onmouseover",function(b){a.getMouseOverTarget.call(a,b)}),document.body.attachEvent("onclick",function(b){a.getClickTarget.call(a,b)}))},a.Ameblo.Image.ImageDetail.prototype.getThumElms=function(){if(document.querySelectorAll)this.thumElms=document.querySelectorAll(".thumImg");else{var a=document.getElementsByTagName("img");this.thumElms=[];for(var b=0,c=a.length;b<c;b++)"thumImg"==a[b].getAttribute("className")&&this.thumElms.push(a[b])}},a.Ameblo.Image.ImageDetail.prototype.getEventTarget=function(a){var b;return b=a.target?a.target:a.srcElement},a.Ameblo.Image.ImageDetail.prototype.getMouseOverTarget=function(a){var b=this.getEventTarget(a);switch(b.id){case"preNavi":case"preText":this.isOnMouse=!0,this.preNaviElm.className=this.imgData[this.currentDataNum-1]||this.prevURL?"preActive":"",this.nextNaviElm.className=this.imgData[this.currentDataNum+1]||this.nextURL?"nextHover":"",this.cancelBubbling(a);break;case"nextNavi":case"nextText":this.isOnMouse=!0,this.preNaviElm.className=this.imgData[this.currentDataNum-1]||this.prevURL?"preHover":"",this.nextNaviElm.className=this.imgData[this.currentDataNum+1]||this.nextURL?"nextActive":"",this.cancelBubbling(a);break;default:this.isOnMouse&&(this.isOnMouse=!1,this.preNaviElm.className="",this.nextNaviElm.className="")}},a.Ameblo.Image.ImageDetail.prototype.getClickTarget=function(a){if(this.isClick){var b=this.getEventTarget(a);switch(b.id){case"nextNavi":if(!this.imgData[this.currentDataNum+1]&&!this.nextURL)break;this.cancelBubbling(a),a.preventDefault?a.preventDefault():a.returnValue=!1,this.changeImgData(1);break;case"preNavi":if(!this.imgData[this.currentDataNum-1]&&!this.prevURL)break;a.preventDefault?a.preventDefault():a.returnValue=!1,this.changeImgData(-1);break;case"thum01":this.cancelBubbling(a),a.preventDefault?a.preventDefault():a.returnValue=!1,this.changeImgData(1);break;case"thum02":a.preventDefault?a.preventDefault():a.returnValue=!1,this.changeImgData(2);break;case"thum03":a.preventDefault?a.preventDefault():a.returnValue=!1,this.changeImgData(3)}}},a.Ameblo.Image.ImageDetail.prototype.setNextData=function(a){for(var b=a.imgList.length,c=0;c<b;c++)this.maxDataCount+=1,this.imgData[this.maxDataCount]=a.imgList[c];this.nextURL=a.nextUrl,this.isFirstLoad?(this.thumImgCount=b,this.setPrevData(this.prevImgData)):this.setImg(),a.nextUrl||(this.isNextAPI=!1)},a.Ameblo.Image.ImageDetail.prototype.setPrevData=function(a){for(var b=a.imgList.length,c=0;c<b;c++)this.minDataCount-=1,this.imgData[this.minDataCount]=a.imgList[c],a.nextUrl||this.nextURL||a.imgList[c].entryUrl!=this.imgData[this.maxDataCount].entryUrl||a.imgList[c].imgUrl!=this.imgData[this.maxDataCount].imgUrl||(delete this.imgData[this.maxDataCount],this.maxDataCount-=1);this.prevURL=a.nextUrl,this.thumImgCount>=3&&(this.thumImgCount=3),this.setImg(),0==this.minDataCount&&0==this.maxDataCount&&(this.naviBoxElm.style.display="none",this.imgItemElm.style.cursor="default"),this.isFirstLoad=!1},a.Ameblo.Image.ImageDetail.prototype.setScript=function(a){this.setLoading(),this.isClick=!1,this.createScript(a)},a.Ameblo.Image.ImageDetail.prototype.setLoading=function(){this.imgItemElm.src="http://stat100.ameba.jp/blog/img_page/pc/images/loading_x2.gif"},a.Ameblo.Image.ImageDetail.prototype.successCallback=function(a){this.isClick=!0,1==this.isTimer&&(window.clearTimeout(this.getApiTimer),this.isTimer=!1),"next"==this.callbackType?this.setNextData(a):this.setPrevData(a)},a.Ameblo.Image.ImageDetail.prototype.failGetJson=function(){if(0==this.isSuccess){this.reloadLinkElm.href=this.pageDomain+this.imgData[this.currentDataNum].pageUrl;var a=document.getElementById("apiError");a.style.display="block"}},a.Ameblo.Image.ImageDetail.prototype.changeImgData=function(a){a<=this.thumImgCount&&(this.currentDataNum+=a,a>0?this.imgData[this.currentDataNum+3]?this.setImg():this.nextURL&&1==this.isNextAPI?(this.callbackType="next",this.setScript(String(this.nextURL))):this.imgData[this.currentDataNum]&&this.setImg():this.imgData[this.currentDataNum-1]?this.setImg():this.prevURL?(this.callbackType="prev",this.setScript(String(this.prevURL))):this.imgData[this.currentDataNum]&&this.setImg())},a.Ameblo.Image.ImageDetail.prototype.setImg=function(){var a=this;if(this.setEntryTitle(this.imgData[this.currentDataNum].title,this.imgData[this.currentDataNum].entryUrl,this.imgData[this.currentDataNum].date),this.reloadLinkElm.href=this.pageDomain+this.imgData[this.currentDataNum].pageUrl,this.imgItemElm.src=this.imageDomain+this.imgData[this.currentDataNum].imgUrl,this.imgItemElm.onload=function(){var b,c;do b=a.mainElm.style.margin,c=a.mainElm.clientWidth,a.setContentHeight();while(b!=a.mainElm.style.margin||c!=a.mainElm.clientWidth)},this.isMeasureLog){var b=this.measure+this.imgData[this.currentDataNum].pageUrl;(new Image).src=b}else this.isMeasureLog=!0;var c=this.currentDataNum;this.imgData[this.currentDataNum+1]?this.imgData[this.currentDataNum+2]?this.imgData[this.currentDataNum+3]?this.thumImgCount=3:this.thumImgCount=2:this.thumImgCount=1:this.thumImgCount=0;for(var d=0;d<3;d++)d<this.thumImgCount?(this.imgData[c+1]?c+=1:c=this.minDataCount,this.thumElms[d].style.background="none",this.thumElms[d].style.cursor="pointer",this.thumElms[d].src=this.imageDomain+this.imgData[c].imgUrl+"?cpd=96"):(this.thumElms[d].style.cursor="auto",this.thumElms[d].src=this.imageDomain+"/blog/img_page/pc/images/no_image.gif");this.currentDataNum!=this.minDataCount||this.prevURL?this.preNaviElm.style.display="block":this.preNaviElm.style.display="none",window.Amb.dfp&&(this.adChangeCount+=1,this.adChangeCount>this.ADCHANGENUM&&(this.adChangeCount=1,window.Amb.dfp.refresh())),window.Amb.Ameblo.imageAd&&(this.theirAdChangeCount+=1,this.theirAdChangeCount>this.THEIRADCHANGENUM&&(this.theirAdChangeCount=1,window.Amb.Ameblo.imageAd.refresh())),window.Amb.AFC&&window.Amb.AFC.Ameblo&&window.Amb.AFC.Ameblo.image&&window.Amb.AFC.Ameblo.image.refresh&&window.Amb.AFC.Ameblo.image.refresh(this.imgData[this.currentDataNum].entryUrl)},window.Amb=window.Amb||{},window.Amb.Ameblo=window.Amb.Ameblo||{},window.Amb.Ameblo.Image=a.Ameblo.Image.ImageDetail,window.Amb.Ameblo.Image.prototype.Callback=a.Ameblo.Image.ImageDetail.prototype.callback}();